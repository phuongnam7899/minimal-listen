<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Yen's</title>
    <base href="/" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="manifest" href="app.webmanifest" />
    <meta name="theme-color" content="#1a1a2e" />

    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Yen's" />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="assets/icons/icon-152x152.png" />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="assets/icons/icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/icons/icon-192x192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="167x167"
      href="assets/icons/icon-152x152.png"
    />

    <!-- Prevent iOS Safari from caching aggressively -->
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>
  <body>
    <!-- iOS Safari Detection and Fallback -->
    <script>
      // Detect iOS Safari
      function isIOSSafari() {
        const userAgent = navigator.userAgent;
        const isIOS = /iPad|iPhone|iPod/.test(userAgent);
        const isSafari =
          /Safari/.test(userAgent) && !/Chrome|CriOS|FxiOS/.test(userAgent);
        return isIOS && isSafari;
      }

      // Show iOS-specific message if detected
      if (isIOSSafari()) {
        document.body.innerHTML = `
          <div style="
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
          ">
            <div style="max-width: 400px; padding: 40px 20px;">
              <h1 style="font-size: 2rem; margin-bottom: 20px; color: #f093fb;">Yen's Music Player</h1>
              <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 30px; opacity: 0.9;">
                For iOS devices, please use <strong>Chrome for iOS</strong> for the best experience.
                Safari on iOS has limited PWA support.
              </p>
              <a href="https://apps.apple.com/app/google-chrome/id535886823" 
                 style="
                   background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                   color: white;
                   padding: 15px 30px;
                   border: none;
                   border-radius: 25px;
                   font-size: 1rem;
                   text-decoration: none;
                   display: inline-block;
                   margin: 10px;
                   transition: all 0.3s ease;
                 "
                 target="_blank">Get Chrome for iOS</a>
              <br>
              <button onclick="location.reload()" 
                      style="
                        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                        color: white;
                        padding: 15px 30px;
                        border: none;
                        border-radius: 25px;
                        font-size: 1rem;
                        cursor: pointer;
                        margin: 10px;
                        transition: all 0.3s ease;
                      ">Try Anyway</button>
            </div>
          </div>
        `;
      }
    </script>

    <app-root></app-root>
    <noscript
      >Please enable JavaScript to continue using this application.</noscript
    >
  </body>
</html>
